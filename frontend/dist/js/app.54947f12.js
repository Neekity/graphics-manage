(function(t){function e(e){for(var a,r,s=e[0],u=e[1],c=e[2],l=0,h=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);f&&f(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},r={app:0},o={app:0},i=[];function s(t){return u.p+"js/"+({about:"about"}[t]||t)+"."+{about:"56114a11"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={about:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"656973e5"}[t]+".css",o=u.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===o))return e()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){c=h[s],l=c.getAttribute("data-href");if(l===a||l===o)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(t);var h=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",h.name="ChunkLoadError",h.type=a,h.request=r,n[1](h)}o[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("be3b"),o=n("6c42");n("da96");a["a"].use(o["a"],{timeout:2e3});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[t.showNav?t._e():n("div",[n("router-view")],1),t.showNav?n("div",[n("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[t._v(" 图文消息管理系统 ")]),n("v-list-item-subtitle",[t._v(" v1.0 ")])],1)],1),n("v-divider"),n("v-list",{staticClass:"text-left",attrs:{dense:"",nav:""}},t._l(t.items,(function(e,a){return n("v-list-group",{key:e.id,attrs:{"prepend-icon":e.icon||"mdi-folder","no-action":""},on:{click:function(e){return t.clearActive(a)}},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)]},proxy:!0}],null,!0),model:{value:e.active,callback:function(n){t.$set(e,"active",n)},expression:"item.active"}},t._l(e.children,(function(e){return n("v-list-item",{key:e.id,attrs:{link:"","input-value":e.active,href:e.path}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1)})),1)],1),n("v-app-bar",{attrs:{app:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),n("v-toolbar-title",[t._v(t._s(t.title))]),n("v-spacer"),n("div",[t.user.userId?n("v-menu",{attrs:{bottom:"","min-width":"150px",rounded:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{icon:""}},a),[n("v-avatar",[n("img",{attrs:{src:t.user.avatarImgPath,alt:t.user.userName}})])],1)]}}],null,!1,1797183246)},[n("v-card",[n("v-list-item-content",{staticClass:"justify-center"},[n("div",{staticClass:"mx-auto text-center"},[n("h4",{staticClass:"my-3"},[t._v(t._s(t.user.userName))]),n("v-divider",{staticClass:"my-3"}),n("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:t.logout}},[t._v(" 退出 ")])],1)])],1)],1):t._e()],1)],1),n("v-main",[n("router-view")],1),n("v-footer",{attrs:{app:""}})],1):t._e()])},s=[],u={name:"App",data:function(){return{showNav:!0,title:"",drawer:null,items:[],right:null,user:{}}},methods:{logout:function(){this.$store.dispatch("handleLogout",{}).then((function(){location.href="/login"}))},clearActive:function(t){this.items[this.$store.state.user.activeParentMenuId].active=t===this.$store.state.user.activeParentMenuId},menuActive:function(){this.items=this.$store.state.user.menu,this.items[this.$store.state.user.activeParentMenuId].active=!0,this.items[this.$store.state.user.activeParentMenuId].children[this.$store.state.user.activeSubMenuId].active=!0}},mounted:function(){this.user=this.$store.state.user,this.showNav=this.$store.state.user.showNav,this.showNav&&this.menuActive()}},c=u,l=n("2877"),h=n("6544"),f=n.n(h),d=n("7496"),p=n("40dc"),m=n("5bc1"),v=n("8212"),b=n("8336"),g=n("b0af"),w=n("ce7e"),k=n("553a"),y=n("132d"),C=n("8860"),I=n("56b0"),P=n("da13"),_=n("5d23"),O=n("34c3"),j=n("f6c4"),x=n("e449"),N=n("f774"),M=n("2fa4"),A=n("2a7f"),V=Object(l["a"])(c,i,s,!1,null,null,null),L=V.exports;f()(V,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:m["a"],VAvatar:v["a"],VBtn:b["a"],VCard:g["a"],VDivider:w["a"],VFooter:k["a"],VIcon:y["a"],VList:C["a"],VListGroup:I["a"],VListItem:P["a"],VListItemContent:_["a"],VListItemIcon:O["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VMain:j["a"],VMenu:x["a"],VNavigationDrawer:N["a"],VSpacer:M["a"],VToolbarTitle:A["a"]});var S=n("f309");a["a"].use(S["a"]);var E=new S["a"]({}),U=(n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("1276"),n("2f62")),T=n("7fa2"),$=n("0e44");a["a"].use(U["a"]);var B=new U["a"].Store({plugins:[Object($["a"])()],state:{},mutations:{},actions:{},modules:{user:T["a"]}}),G=n("3384"),H=n.n(G),D=n("8c4f");a["a"].use(D["a"]);var q=[{path:"/material",name:"MaterialLibrary",meta:{title:"素材库",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"ff24"))}},{path:"/material/graphics/edit",name:"MaterialGraphicsEdit",meta:{title:"编辑素材",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"a978"))}},{path:"/channel/edit",name:"EditChannel",meta:{title:"编辑频道",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"b100"))}},{path:"/message-owner",name:"MessageOwner",meta:{title:"消息管理列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"d397"))}},{path:"/message-user",name:"MessageUser",meta:{title:"用户消息列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"ba30"))}},{path:"/channel",name:"ChannelList",meta:{title:"频道列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"ac4a"))}},{path:"/user",name:"UserList",meta:{title:"用户列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"1faf"))}},{path:"/role",name:"RoleList",meta:{title:"角色列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"98bb"))}},{path:"/permission",name:"PermissionList",meta:{title:"权限列表",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"cf7f"))}},{path:"/message-user/show",name:"MessageUserShow",meta:{title:"用户消息详情",authCheck:!0,hideNav:!0},component:function(){return n.e("about").then(n.bind(null,"e744"))}},{path:"/message-owner/show",name:"MessageOwnerShow",meta:{title:"消息详情",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"b3b1"))}},{path:"/login",name:"Login",meta:{title:"登录",hideNav:!0},component:function(){return n.e("about").then(n.bind(null,"102d"))}},{path:"/menu",name:"Menu",meta:{title:"菜单",authCheck:!0},component:function(){return n.e("about").then(n.bind(null,"f833"))}},{path:"/example",name:"Example",meta:{title:"示例",authCheck:!1,hideNav:!0},component:function(){return n.e("about").then(n.bind(null,"d083"))}}],R={mode:"history",routes:q,scrollBehavior:function(t,e,n){var a=0;return t.hash?a=t.hash:n&&(a=n.y),H()(a)}},F=function(t){var e="/"+(t.path.split("/")[1]||"");if("/"!==e){var n=B.state.user.menu;if(n)for(var a=0;a<n.length;a++){var r=!1;if(n[a].children)for(var o=0;o<n[a].children.length;o++)if(n[a].children[o].path===e){B.state.user.activeParentMenuId=a,B.state.user.activeSubMenuId=o,r=!0;break}if(r)break}}},J=new D["a"](R),z=r["a"]+"/oauth/login";a["a"].prototype.$loginPage=z,J.beforeEach((function(t,e,n){var a=B.state.user.access;t.meta.hideNav?B.state.user.showNav=!1:B.state.user.showNav=!0,t.meta.authCheck?B.state.user.hasGetInfo&&B.state.user.token&&Object(T["c"])()&&Object(T["c"])()===B.state.user.token?a.indexOf(t.path)>-1?(F(t),n()):"/login"!==t.path?n({path:"/401"}):(F(t),n()):window.location.href=z:(F(t),n())}));var K=J,Q=n("7e79"),W=n.n(Q),X=n("ec45");a["a"].use(X["a"]),a["a"].use(W.a),a["a"].config.productionTip=!1,new a["a"]({vuetify:E,router:K,store:B,render:function(t){return t(L)}}).$mount("#app")},"7fa2":function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return p}));n("d3b7"),n("ac1f"),n("841c"),n("1276"),n("b0c0");var a=n("be3b"),r=n("852e"),o=n.n(r),i="graphics_token",s=n("f121"),u=function(){return Object(a["b"])("post","user/info")},c=function(){return new Promise((function(t){t({data:l()})}))},l=function(){var t=location.search,e={};if(-1!==t.indexOf("?"))for(var n=t.substr(1).split("&"),a=0;a<n.length;a++)e[n[a].split("=")[0]]=unescape(n[a].split("=")[1]);return e},h=function(t){return Object(a["b"])("post","/logout",{token:t})},f=s.cookieExpires,d=function(t){o.a.set(i,t,{expires:f||1})},p=function(){var t=o.a.get(i);return t||!1};e["a"]={state:{userName:"",userId:"",avatarImgPath:"",token:p(),activeParentMenuId:0,activeSubMenuId:0,access:[],hasGetInfo:!1,showNav:!0,roles:[],rolesValues:[],subjects:[],menu:[]},mutations:{setAvatar:function(t,e){t.avatarImgPath=e},setUserId:function(t,e){t.userId=e},setUserName:function(t,e){t.userName=e},setToken:function(t,e){t.token=e,d(e)},setHasGetInfo:function(t,e){t.hasGetInfo=e},setMenu:function(t,e){t.menu=e},setAccess:function(t,e){t.access=e}},actions:{handleLogin:function(t){var e=t.commit;return new Promise((function(t,n){c({}).then((function(n){n.data.token&&e("setToken",n.data.token),t()})).then((function(){Object(a["b"])("post","/menu/list").then((function(n){var a=n.data.data;e("setMenu",a),t()})).catch((function(t){n(t)}))})).catch((function(t){console.log(t),n(t)}))}))},handleLogout:function(t){var e=t.state,n=t.commit;return new Promise((function(t,a){h(e.token).then((function(){n("setToken",""),n("setAccess",[]),n("setHasGetInfo",!1),n("setAvatar",""),n("setMenu",{}),localStorage.clear(),t()})).catch((function(t){a(t)}))}))},getUserInfo:function(t){var e=t.state,n=t.commit;return new Promise((function(t,a){try{u(e.token).then((function(e){var a=e.data.data;console.log(a),a.id||a.name||(location.href="/login"),n("setAvatar",a.avatar),n("setUserName",a.name),n("setUserId",a.id),n("setAccess",a.access),n("setHasGetInfo",!0),t(a)})).catch((function(t){a(t)}))}catch(r){console.log(r),a(r)}}))}},modules:{}}},be3b:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));n("a15b"),n("d3b7");var a=n("bc3a"),r=n.n(a),o=n("2b0e"),i=n("f121"),s=n("7fa2"),u=r.a.create({baseUrl:i["default"].baseUrl,timeout:3e4}),c=function(t){void 0===t?alert("服务器出错！"):(401===t.status&&(window.location.href="/login"),403===t.status&&alert("请求方式错误！"),(500===t.status||t.status>504)&&alert("服务器发生错误"),502===t.status&&alert("服务器网关错误"),503===t.status&&alert("服务器不可用"),504===t.status&&alert("网关超时"))},l=i["default"].baseUrl;function h(t){try{var e=[];for(var n in t){var a=encodeURIComponent(n),r=encodeURIComponent(t[n]);e.push(a+"="+r)}return e.join("&")}catch(o){return""}}u.interceptors.request.use((function(t){return Object(s["c"])()?t.headers.Authorization="Bearer "+Object(s["c"])():window.location.href="/login",t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){return c(t),t}),(function(t){var e=t.response;return c(e),Promise.reject(t)}));var f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=l+(0===e.indexOf("/")?e:"/"+e);return"get"===t&&(a=a+"?"+h(n)),u[t](a,n)};Plugin.install=function(t){t.graphicsHttp=f,window.graphicsHttp=f,Object.defineProperties(t.prototype,{$graphicsHttp:{get:function(){return f}},graphicsHttp:{get:function(){return f}}})},o["a"].use(Plugin);Plugin},f121:function(t,e,n){"use strict";n.r(e),e["default"]={title:"图文消息管理",cookieExpires:"1",baseUrl:"https://graphics.huangtaohome.top/backend"}}});
//# sourceMappingURL=app.54947f12.js.map